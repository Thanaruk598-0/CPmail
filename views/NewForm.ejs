<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>Fill Form - <%= template.title %></title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body class="p-4 bg-light">

<%- include('../partials/navbar', { user: currentUser, activeMenu: 'forms' }) %>

<div class="container mt-4">
  <div class="card shadow-lg">
    <div class="card-body">
      <h3 class="fw-bold mb-3"><%= template.title %></h3>
      <p class="text-muted"><%= template.description || '' %></p>

      <form action="/forms" method="POST">
        <!-- ส่งค่า Template ID -->
        <input type="hidden" name="templateId" value="<%= template._id %>">

        <% template.fields.forEach((field, index) => { %>
          <div class="mb-3">
            <label class="form-label fw-semibold"><%= field.label %>
              <% if (field.required) { %><span class="text-danger">*</span><% } %>
            </label>

            <% if (field.type === "text") { %>
              <input type="text" class="form-control" name="fields[<%= index %>]" placeholder="<%= field.placeholder || '' %>" <%= field.required ? 'required' : '' %>>

            <% } else if (field.type === "textarea") { %>
              <textarea class="form-control" name="fields[<%= index %>]" placeholder="<%= field.placeholder || '' %>" <%= field.required ? 'required' : '' %>></textarea>

            <% } else if (field.type === "number") { %>
              <input type="number" class="form-control" name="fields[<%= index %>]" <%= field.required ? 'required' : '' %>>

            <% } else if (field.type === "date") { %>
              <input type="date" class="form-control" name="fields[<%= index %>]" <%= field.required ? 'required' : '' %>>

            <% } else { %>
              <input type="text" class="form-control" name="fields[<%= index %>]" placeholder="<%= field.placeholder || '' %>">
            <% } %>
          </div>
        <% }) %>

        <div class="mt-4 d-flex justify-content-end gap-2">
          <a href="/form-templates" class="btn btn-outline-secondary">Cancel</a>
          <button type="submit" class="btn btn-primary">Submit Form</button>
        </div>
      </form>
    </div>
  </div>
</div>

</body>
</html>
