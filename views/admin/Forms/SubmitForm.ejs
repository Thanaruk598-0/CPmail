<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>Submit Form – <%= template.title %></title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>
<body class="p-4 bg-light">

<div class="container">
  <h3 class="mb-3">แบบฟอร์ม: <%= template.title %></h3>
  <p><%= template.description %></p>

  <form action="/forms/submit/<%= template._id %>" method="POST" enctype="multipart/form-data">
    <% template.fields.forEach((f, idx) => { %>
      <div class="mb-3">
        <label class="form-label"><%= f.label %> <%= f.required ? '*' : '' %></label>

        <% if (f.type === "text") { %>
          <input type="text" name="field_<%= idx %>" class="form-control" placeholder="<%= f.placeholder || '' %>" <%= f.required ? 'required' : '' %>>
        
        <% } else if (f.type === "textarea") { %>
          <textarea name="field_<%= idx %>" class="form-control" placeholder="<%= f.placeholder || '' %>" <%= f.required ? 'required' : '' %>></textarea>
        
        <% } else if (f.type === "email") { %>
          <input type="email" name="field_<%= idx %>" class="form-control" placeholder="<%= f.placeholder || '' %>" <%= f.required ? 'required' : '' %>>
        
        <% } else if (f.type === "number") { %>
          <input type="number" name="field_<%= idx %>" class="form-control" placeholder="<%= f.placeholder || '' %>" <%= f.required ? 'required' : '' %>>
        
        <% } else if (f.type === "date") { %>
          <input type="date" name="field_<%= idx %>" class="form-control" <%= f.required ? 'required' : '' %>>
        
        <% } else if (f.type === "dropdown") { %>
          <select name="field_<%= idx %>" class="form-select" <%= f.required ? 'required' : '' %>>
            <% (f.options || []).forEach(opt => { %>
              <option value="<%= opt %>"><%= opt %></option>
            <% }) %>
          </select>
        
        <% } else if (f.type === "radio") { %>
          <% (f.options || []).forEach(opt => { %>
            <div class="form-check">
              <input type="radio" class="form-check-input" name="field_<%= idx %>" value="<%= opt %>" <%= f.required ? 'required' : '' %>>
              <label class="form-check-label"><%= opt %></label>
            </div>
          <% }) %>
        
        <% } else if (f.type === "checkbox") { %>
          <% (f.options || []).forEach(opt => { %>
            <div class="form-check">
              <input type="checkbox" class="form-check-input" name="field_<%= idx %>[]"
                     value="<%= opt %>" <%= f.required ? 'required' : '' %>>
              <label class="form-check-label"><%= opt %></label>
            </div>
          <% }) %>
        
        
        <% } else if (f.type === "file") { %>
          <input type="file" name="field_<%= idx %>" class="form-control" <%= f.required ? 'required' : '' %>>
        
        <% } %>
      </div>
    <% }) %>

    <button type="submit" class="btn btn-success">Submit</button>
  </form>
</div>
<div class="mb-3">
  <label class="form-label">ระดับความสำคัญ</label>
  <select name="priority" class="form-select">
    <option value="high">สูง / เร่งด่วน</option>
    <option value="medium" selected>ปานกลาง</option>
    <option value="low">ต่ำ</option>
  </select>
</div>


</body>
</html>
